@model MvcMovie.Models.Formation

@{
    ViewData["Title"] = "D√©tails de la formation";
}

<div class="container mt-4">

    <h2 class="mb-4 text-white">üìò D√©tails de la formation</h2>

    <div class="card shadow-sm p-4 mb-4 bg-dark text-white">
        <h4 class="card-title text-info">
            @(string.IsNullOrWhiteSpace(Model.Titre) ? "‚ÑπÔ∏è Titre non renseign√©" : Model.Titre)
        </h4>
        <hr />
        <p><strong>Description :</strong> @(string.IsNullOrWhiteSpace(Model.Description) ? "‚ÑπÔ∏è Aucune description disponible" : Model.Description)</p>
        <p><strong>Date d√©but :</strong> @Model.DateDebut.ToString("dd/MM/yyyy")</p>
        <p><strong>Date fin :</strong> @Model.DateFin.ToString("dd/MM/yyyy")</p>
    </div>

    <h3 class="text-white mb-3">Liste des inscriptions</h3>

    @if (Model.Inscriptions == null || !Model.Inscriptions.Any())
    {
        <p class="text-light">Aucune inscription pour cette formation.</p>
    }
    else
    {
        <table class="table table-striped table-dark">
            <thead>
                <tr>
                    <th class="text-white">Employ√©</th>
                    <th class="text-white">Date d'inscription</th>
                    <th class="text-white">Action</th>
                </tr>
            </thead>
            <tbody>
            @foreach (var inscription in Model.Inscriptions)
            {
                <tr>
                    <td class="text-white">
                        @(inscription.Employe != null ? $"{inscription.Employe.Nom} {inscription.Employe.Prenom}" : "‚ÑπÔ∏è Employ√© inconnu")
                    </td>
                    <td class="text-white">@inscription.DateInscription.ToString("dd/MM/yyyy")</td>
                    <td>
                        <a asp-action="GenerateCertificate" 
                           asp-controller="Dashboard" 
                           asp-route-inscriptionId="@inscription.Id" 
                           class="btn btn-sm btn-success">
                            T√©l√©charger Certificat
                        </a>
                    </td>
                </tr>
            }
            </tbody>
        </table>
    }

    <div class="mt-3">
        <a asp-action="Index" class="btn btn-secondary">
            ‚¨Ö Retour
        </a>
    </div>
</div>
