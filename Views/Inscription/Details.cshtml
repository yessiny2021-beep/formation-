@model MvcMovie.Models.Inscription
@{
    ViewData["Title"] = "Détails inscription";
}
<h1>Détails</h1>

<dl class="row">
    <dt class="col-sm-2">Formation</dt><dd class="col-sm-10">@Model.Formation?.Titre</dd>
    <dt class="col-sm-2">Employé</dt><dd class="col-sm-10">@Model.Employe?.Nom @Model.Employe?.Prenom</dd>
    <dt class="col-sm-2">Date inscription</dt><dd class="col-sm-10">@Model.DateInscription.ToLocalTime()</dd>
    <dt class="col-sm-2">Statut</dt><dd class="col-sm-10">@Model.Statut</dd>
    <dt class="col-sm-2">Présence</dt><dd class="col-sm-10">@Model.Presence</dd>
    <dt class="col-sm-2">Certificat</dt><dd class="col-sm-10">@(Model.CertificatEmis ? Model.CertificatNumero : "—")</dd>
</dl>

<form asp-action="SetStatut" method="post" class="d-inline">
    <input type="hidden" name="id" value="@Model.Id" />
    <select name="statut" class="form-control d-inline-block" style="width:auto">
        <option value="EnAttente">En attente</option>
        <option value="Approuvee">Approuvée</option>
        <option value="Refusee">Refusée</option>
        <option value="Terminee">Terminée</option>
    </select>
    <button type="submit" class="btn btn-primary">Mettre à jour le statut</button>
</form>

<form asp-action="MarkPresence" method="post" class="d-inline">
    <input type="hidden" name="id" value="@Model.Id" />
    <input type="hidden" name="presence" value="true" />
    <button type="submit" class="btn btn-success">Marquer présence</button>
</form>

@if(Model.Presence && Model.Statut == MvcMovie.Models.StatutInscription.Terminee && !Model.CertificatEmis)
{
    <a asp-action="GenerateCertificat" asp-route-id="@Model.Id" class="btn btn-warning">Générer Certificat</a>
}
<a asp-action="Index" class="btn btn-secondary">Retour</a>
